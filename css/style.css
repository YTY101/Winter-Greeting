:root{
  --bg-top: #eaf3ff;         /* pale blue */
  --bg-mid: #f7f0ff;         /* faint lilac */
  --bg-btm: #ffe8f3;         /* soft pink */
  --ink: #1f2a44;            /* deep ink */
  --ink-soft:#3d4a6a;
  --accent:#b22234;          /* lantern red */
  --gold:#cfae6e;            /* warm gold */
  --card: rgba(255,255,255,0.58);
  --card-strong: rgba(255,255,255,0.75);
  --shadow: 0 10px 30px rgba(31,42,68,0.15);
  --radius-xl: 22px;
  --radius-lg: 16px;
  --radius-md: 12px;

  /* 背景图片层（每个主题覆盖） */
  --bg-image: none;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--ink);
  /* 背景：顶层高光、其下渐变、底层主题背景图 */
  background:
    radial-gradient(1200px 600px at 80% -10%, rgba(255,255,255,0.9), transparent 60%),
    linear-gradient(180deg, var(--bg-top) 0%, var(--bg-mid) 40%, var(--bg-btm) 100%),
    var(--bg-image);
  background-size: 100% 100%, 100% 100%, cover;
  background-position: center, center, center;
  /* 第三层背景图在部分移动端对 fixed 支持不佳，改为 scroll 提升兼容性 */
  background-attachment: fixed, fixed, scroll;
  /* 让中间的线性渐变与底层图片进行柔和混合，避免遮挡图片 */
  background-blend-mode: normal, soft-light, normal;

  font-family: "STKaiti", "KaiTi", "Kaiti SC", "Songti SC", "Noto Serif SC", "Source Han Serif SC", serif;
  line-height:1.6; overflow-x:hidden;
}
body::before{content:""; position:fixed; inset:0; background:radial-gradient(60% 40% at 50% 0%, rgba(255,255,255,0.35), transparent 60%); pointer-events:none}
.wrap{position:relative; min-height:100dvh; display:grid; grid-template-rows:auto 1fr auto}
header{position:relative; padding:28px clamp(16px, 4vw, 48px); display:flex; align-items:center; justify-content:space-between; gap:12px}
.brand{display:flex; align-items:center; gap:12px; font-weight:600; letter-spacing:1px}
.seal{width:36px; height:36px; border-radius:50%; background: conic-gradient(from 0turn, #fff, #fff0 60%), var(--card-strong); box-shadow: var(--shadow); display:grid; place-items:center; position:relative}
.seal::after{content:"立"; font-size:18px; color:var(--accent); font-weight:700}
.controls{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
.volume{display:inline-flex; align-items:center; gap:6px; font-size:12px; color:#5b6a91}
main{position:relative; padding: clamp(18px, 3.5vw, 32px); display:grid; place-items:center}
.hero{position:relative; width:min(960px, 95vw); background: var(--card); backdrop-filter: blur(10px) saturate(125%); -webkit-backdrop-filter: blur(10px) saturate(125%); border-radius: var(--radius-xl); box-shadow: var(--shadow); padding: clamp(22px, 5.5vw, 48px); overflow:hidden; isolation:isolate}
.title{margin:0 0 8px 0; font-size: clamp(28px, 5vw, 56px); line-height:1.1; font-weight:800; letter-spacing:1px; color: transparent; background: linear-gradient(90deg, var(--ink) 0%, #2b3550 50%, var(--ink) 100%); -webkit-background-clip:text; background-clip:text; text-shadow: 0 2px 0 rgba(255,255,255,0.25)}
.subtitle{font-size: clamp(16px, 2.4vw, 22px); color: var(--ink-soft); margin: 6px 0 14px 0; opacity:0; transform: translateY(6px); animation: fadeUp 800ms ease forwards 200ms}
.tagline{font-size: 14px; color:#44537a; opacity:0.9; letter-spacing: 0.5px; margin-bottom: 18px}
.ornaments{display:grid; grid-template-columns: repeat(4, minmax(72px, 1fr)); gap:14px; margin: 18px 0 22px 0}
.chip-btn{background: var(--card-strong); border:0; border-radius: var(--radius-lg); padding:12px; display:flex; align-items:center; gap:10px; box-shadow: var(--shadow); justify-content:center; cursor:pointer; color:var(--ink-soft); transition:transform .15s ease, box-shadow .2s ease, outline-offset .15s}
.chip-btn[aria-pressed="true"], .chip-btn:hover{transform: translateY(-1px); box-shadow: 0 2px 0 #fff inset, 0 0 0 6px rgba(178,34,52,0.25), var(--shadow)}
.chip-btn svg{ width:26px; height:26px; flex:0 0 auto }
.blessing-card{background: #fff; border-radius: var(--radius-xl); box-shadow: var(--shadow); padding: clamp(14px, 3vw, 22px); display:grid; gap:12px}
.blessing-text{min-height: 2.2em; font-size: clamp(18px, 2.4vw, 22px)}
.actions{ display:flex; gap:12px; flex-wrap:wrap; align-items:center }
.btn{ --ring: rgba(178,34,52,0.35); display:inline-flex; align-items:center; gap:10px; padding: 12px 18px; border-radius: 999px; border: 0; background: linear-gradient(180deg, #fff, #f6f3ff); box-shadow: 0 2px 0 #fff inset, 0 0 0 0px var(--ring), var(--shadow); color: var(--ink); cursor:pointer; font-weight:700; letter-spacing: .3px; transition: transform .15s ease, box-shadow .2s ease }
.btn:hover{ transform: translateY(-1px); box-shadow: 0 2px 0 #fff inset, 0 0 0 8px var(--ring), var(--shadow) }
.btn:active{ transform: translateY(0) scale(.995) }
.note{ font-size: 12px; color:#5b6a91 }
footer{ padding:22px; text-align:center; font-size:12px; color:#556088 }
#snow{ position: fixed; inset:0; pointer-events:none; z-index: 3; opacity:.8 }
.flake-bg{ position:absolute; inset:-10%; z-index:-1; pointer-events:none; background: radial-gradient(10px 10px at 20% 20%, rgba(255,255,255,.8), transparent 70%), radial-gradient(14px 14px at 80% 10%, rgba(255,255,255,.65), transparent 70%), radial-gradient(12px 12px at 10% 85%, rgba(255,255,255,.55), transparent 70%); animation: slowPan 24s linear infinite }
@keyframes slowPan{ from{ transform: translate3d(0,0,0)} to{ transform: translate3d(-2%, -2%,0)} }
@keyframes fadeUp{ to{ opacity:1; transform:none } }
@media (prefers-reduced-motion: reduce){ .subtitle{ animation:none; opacity:1; transform:none } .flake-bg{ animation: none } #snow{ display:none } }
@media (max-width:540px){ .ornaments{ grid-template-columns: repeat(2, 1fr) } header{ padding-bottom: 8px } }

/* 主题变量：通过设置 <body data-theme="…"> 覆盖。并指定各自背景图 */
body[data-theme="xuehua"]{
  --bg-top:#eaf3ff; --bg-mid:#f7f0ff; --bg-btm:#ffe8f3; --accent:#5b7bb9; --ink:#1f2a44; --ink-soft:#3d4a6a;
  --bg-image: url("../assets/bg/xuehua.jpg");
}
body[data-theme="dengying"]{
  --bg-top:#fff0f0; --bg-mid:#ffe3d9; --bg-btm:#ffd4b8; --accent:#d03a2f; --ink:#332222; --ink-soft:#614040;
  --bg-image: url("../assets/bg/dengying.jpg");
}
body[data-theme="meixiang"]{
  --bg-top:#fff1f6; --bg-mid:#ffe4f1; --bg-btm:#ffd9ec; --accent:#c85c8e; --ink:#3a2432; --ink-soft:#5a3a4a;
  --bg-image: url("../assets/bg/meixiang.jpg");
}
body[data-theme="dongzhuan"]{
  --bg-top:#fff7e8; --bg-mid:#ffeacf; --bg-btm:#ffdfb6; --accent:#b57a3f; --ink:#3a2a18; --ink-soft:#5b4330;
  --bg-image: url("../assets/bg/dongzhuan.jpg");
}

/* 页面切换时的柔和过渡（叠加在 reveal 之上） */
body.switching .hero{ animation: cardGlow 900ms ease both }
@keyframes cardGlow{
  0%{ box-shadow: 0 0 0 rgba(0,0,0,0) }
  30%{ box-shadow: 0 18px 60px rgba(31,42,68,0.25) }
  100%{ box-shadow: var(--shadow) }
}

/* 主题“揭示”特效层：底部左→右扫过的光幕 */
#themeReveal{
  position: fixed; left: -20%; bottom: -10%;
  width: 140%; height: 120%;
  pointer-events: none; z-index: 8; opacity: 0;
  background:
    radial-gradient(60% 30% at 0% 100%, rgba(255,255,255,0.85), rgba(255,255,255,0) 60%),
    linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0));
  mix-blend-mode: screen;
  transform: translateX(-110%) rotate(-2deg);
  filter: blur(0.5px);
}
#themeReveal.revealing{ animation: revealSweep 900ms cubic-bezier(.2,.8,.2,1) forwards }
@keyframes revealSweep{
  0%{ opacity:.0; transform: translateX(-110%) rotate(-2deg) }
  10%{ opacity:.95 }
  100%{ opacity:0; transform: translateX(10%) rotate(-2deg) }
}
